<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>11. Paddle Drop Game &mdash; CS1335 Documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="CS1335 Documentation" href="index.html" />
    <link rel="next" title="12. Paddle Object" href="paddle.html" />
    <link rel="prev" title="10. Rain Catcher Game" href="rainGame.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="paddle.html" title="12. Paddle Object"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="rainGame.html" title="10. Rain Catcher Game"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">CS1335 Documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="paddle-drop-game">
<span id="paddledropgame"></span><h1>11. Paddle Drop Game<a class="headerlink" href="#paddle-drop-game" title="Permalink to this headline">¶</a></h1>
<p>Based on <a class="reference external" href="http://learningprocessing.com">Shiffman&#8217;s</a> RainDropGame, and on the program code for Learning Processing: <a class="reference external" href="http://www.learningprocessing.com/exercises/chapter-10/exercise-10-4">exercise 10.4</a>,
we want to build a slightly more complicated game based on this program.  Our game will use a paddle
object to try and catch the falling drops.  We&#8217;ll also use <a class="reference internal" href="glossary.html#object-inheritance"><em>Object Inheritance</em></a> to have several different
objects that fall during our game, and we&#8217;ll use the PShape object to allow the use of .svg images for
interesting drop objects.  Also, we&#8217;ll use a Game class for methods and variables related to the game state,
this will include Button class to start the game and to allow the game to be reset.  A more advanced
version of the game could also include gameLevels and other more advanced features</p>
<div class="section" id="planning">
<h2>11.1. Planning<a class="headerlink" href="#planning" title="Permalink to this headline">¶</a></h2>
<p>To begin design of our game, let&#8217;s look at the changes we&#8217;ll need to make, to modify
<a class="reference external" href="http://learningprocessing.com">Shiffman&#8217;s</a> exercise 10.4 project code. In <a class="reference external" href="http://learningprocessing.com">Shiffman&#8217;s</a> project, he has all of the game type
code simply implemented within the processing draw loop.  We&#8217;d like to re-factor his program and
make a separate Game class in order to make it easier to organize and understand our program code.
If we look at his Draw loop code, we can see that he&#8217;s incrementing a score-type variable, he&#8217;s
keeping track of misses, etc.  So, let&#8217;s create a Game Class, initially we can begin with the following
instance variables, we will probably expand on these at some point:</p>
<div class="section" id="game-instance-variables">
<h3>11.1.1. Game: Instance Variables<a class="headerlink" href="#game-instance-variables" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>score: <code class="docutils literal"><span class="pre">int</span></code></li>
<li>gameState: <code class="docutils literal"><span class="pre">int</span></code></li>
<li>missedCount: <code class="docutils literal"><span class="pre">int</span></code></li>
<li>maxAllowedMisses: <code class="docutils literal"><span class="pre">int</span></code></li>
<li>startBtn: <code class="docutils literal"><span class="pre">button</span></code></li>
<li>resetBtn: <code class="docutils literal"><span class="pre">button</span></code></li>
</ul>
<p>We can use integer values to indicate the possible gameState values, this will allow
us to use a switch(gameState)  structure. We can use the keyword <code class="docutils literal"><span class="pre">final</span></code> to make it clear that
these are values that shouldn&#8217;t be changed within the program</p>
<div class="highlight-Java"><div class="highlight"><pre><span class="kd">final</span> <span class="kt">int</span> <span class="n">START</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span>
<span class="kd">final</span> <span class="kt">int</span> <span class="n">ACTIVE</span><span class="o">=</span><span class="mi">1</span><span class="o">;</span>
<span class="kd">final</span> <span class="kt">int</span> <span class="n">END</span><span class="o">=</span><span class="mi">2</span><span class="o">;</span>
</pre></div>
</div>
<p>Next, we&#8217;ll want a few methods, we may add more methods later, but we can immediately
imagine we&#8217;ll need the following methods:</p>
</div>
<div class="section" id="game-methods">
<h3>11.1.2. Game: Methods<a class="headerlink" href="#game-methods" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>display( ) : <code class="docutils literal"><span class="pre">void</span></code></li>
<li>reset( )   : <code class="docutils literal"><span class="pre">void</span></code></li>
<li>isGameOver( ) : <code class="docutils literal"><span class="pre">boolean</span></code></li>
</ul>
</div>
</div>
<div class="section" id="game-button-objects">
<h2>11.2. Game Button Objects<a class="headerlink" href="#game-button-objects" title="Permalink to this headline">¶</a></h2>
<p>If we want to include some Button objects in our game, like a startButton and a resetButton,
then we&#8217;ll need to look at what a Button object would look like.  Shiffman provides an example of
a Button object in <a class="reference external" href="http://www.learningprocessing.com/exercises/chapter-9/excercise-9-8">Exercise 9.8</a>  To integrate the a start button in the Game class, it&#8217;s
important to remember to initialize the button in the Game constructor, aslo, for the simple button
class and click methods that we&#8217;ve created, we want to make sure out buttons don&#8217;t have the same position
values because we are using the position to determine if the button has been clicked:</p>
<div class="highlight-Java"><div class="highlight"><pre><span class="n">Game</span><span class="o">(){</span>
        <span class="kt">int</span> <span class="n">gameState</span><span class="o">=</span><span class="n">START</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">score</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span>
        <span class="n">startBtn</span><span class="o">=</span><span class="k">new</span> <span class="n">Button</span><span class="o">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span> <span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="mi">20</span><span class="o">,</span><span class="mi">70</span><span class="o">,</span><span class="mi">50</span><span class="o">);</span>  <span class="c1">//make sure buttons aren&#39;t in the same location</span>
        <span class="n">resetBtn</span><span class="o">=</span><span class="k">new</span> <span class="n">Button</span><span class="o">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span> <span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="mi">50</span><span class="o">,</span><span class="mi">70</span><span class="o">,</span><span class="mi">50</span><span class="o">);</span>
        <span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="game-display-buttons">
<h2>11.3. Game Display - Buttons<a class="headerlink" href="#game-display-buttons" title="Permalink to this headline">¶</a></h2>
<p>Then, in the Display method for the game, we can display the buttons depending on what
the gameState is:</p>
<div class="highlight-Java"><div class="highlight"><pre><span class="c1">//this code is in the Game class tab</span>

<span class="kt">void</span> <span class="nf">display</span><span class="o">(){</span>
        <span class="k">switch</span><span class="o">(</span><span class="n">gameState</span><span class="o">){</span>
          <span class="k">case</span> <span class="mi">0</span><span class="o">:</span>  <span class="c1">//Game is in &#39;Start&#39; mode - show start button</span>
                <span class="n">fill</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span>
                <span class="n">rect</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="n">width</span><span class="o">,</span><span class="n">height</span><span class="o">);</span>
                <span class="n">startBtn</span><span class="o">.</span><span class="na">display</span><span class="o">();</span>   <span class="c1">//here&#39;s where we display the start button</span>
                <span class="n">fill</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
                <span class="n">text</span><span class="o">(</span><span class="s">&quot;Push to Start&quot;</span><span class="o">,</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="mi">10</span><span class="o">);</span>
                <span class="k">break</span><span class="o">;</span>
         <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>  <span class="c1">//game is in &#39;ACTIVE&#39; mode</span>
                <span class="n">fill</span><span class="o">(</span><span class="mi">100</span><span class="o">,</span><span class="mi">150</span><span class="o">,</span><span class="mi">200</span><span class="o">);</span>
                <span class="n">rect</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="n">width</span><span class="o">,</span><span class="n">height</span><span class="o">);</span>
                <span class="n">fill</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
                <span class="n">stroke</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
                <span class="n">text</span><span class="o">(</span><span class="s">&quot;Score: &quot;</span> <span class="o">+</span> <span class="n">score</span><span class="o">,</span><span class="mi">20</span><span class="o">,</span><span class="mi">20</span><span class="o">);</span>
                <span class="k">break</span><span class="o">;</span>
          <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>   <span class="c1">//game is in &#39;END&#39; mode</span>
                <span class="n">resetBtn</span><span class="o">.</span><span class="na">display</span><span class="o">();</span>   <span class="c1">//here&#39;s where we display the reset button</span>
                <span class="n">fill</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
                <span class="n">text</span><span class="o">(</span><span class="s">&quot;Push to Restart&quot;</span><span class="o">,</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="mi">10</span><span class="o">);</span>
                <span class="k">break</span><span class="o">;</span>
                <span class="o">}</span>
        <span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="button-state">
<h2>11.4. Button State<a class="headerlink" href="#button-state" title="Permalink to this headline">¶</a></h2>
<p>The button objects have a display method which we&#8217;ve called above in the game.display( ) method. So, the
button knows what to look like based on it&#8217;s internal state.  That is the button&#8217;s responsibility.  However
the main reason that we want to use a button is so we can change something in the program whenever someone
clicks on the button and changes the button&#8217;s internal state.  So, the Button objects have an internal state
that is boolean: on, which is either true or false.  This state is changed when the button.click() method is called:</p>
<div class="highlight-Java"><div class="highlight"><pre>      <span class="c1">/// this code is in the Button Class:: notice that we&#39;ll have a problem if the buttons have the same position</span>
      <span class="c1">/// which might not be obvious if they&#39;re displayed at different times.</span>

      <span class="kt">void</span> <span class="nf">click</span><span class="o">(</span><span class="kt">int</span> <span class="n">mx</span><span class="o">,</span> <span class="kt">int</span> <span class="n">my</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">//input is mouseX, mouseY</span>
              <span class="c1">// Check to see if a point is inside the rectangle</span>
              <span class="k">if</span> <span class="o">(</span><span class="n">mx</span> <span class="o">&gt;</span> <span class="n">x</span> <span class="o">&amp;&amp;</span> <span class="n">mx</span> <span class="o">&lt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">w</span> <span class="o">&amp;&amp;</span> <span class="n">my</span> <span class="o">&gt;</span> <span class="n">y</span> <span class="o">&amp;&amp;</span> <span class="n">my</span> <span class="o">&lt;</span> <span class="n">y</span> <span class="o">+</span> <span class="n">h</span><span class="o">)</span> <span class="o">{</span>
              <span class="n">on</span> <span class="o">=</span> <span class="o">!</span><span class="n">on</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="game-button-integration">
<h2>11.5. Game Button Integration<a class="headerlink" href="#game-button-integration" title="Permalink to this headline">¶</a></h2>
<p>Now we need to figure out how to integrate the button event handler into the game.  So, if we look
back at the main program code, we have a MouseClicked( ) event and this is where the game.startButton.click()
code must be located so it&#8217;s executed when the user clicks the mouse.  There are 2 different types of game
methods called here, first is the Button click() method for each button.  The second is game1.checkState( ).
It might not be obvious that we would want to have this type of method, but it makes it easier within the Game
objects to determine what the impact of the button clicks has on the game:</p>
<div class="highlight-Java"><div class="highlight"><pre><span class="c1">//this code is in the main program tab</span>

<span class="kt">void</span> <span class="nf">mouseClicked</span><span class="o">(){</span>
          <span class="n">game1</span><span class="o">.</span><span class="na">resetBtn</span><span class="o">.</span><span class="na">click</span><span class="o">(</span><span class="n">mouseX</span><span class="o">,</span><span class="n">mouseY</span><span class="o">);</span>
          <span class="n">game1</span><span class="o">.</span><span class="na">startBtn</span><span class="o">.</span><span class="na">click</span><span class="o">(</span><span class="n">mouseX</span><span class="o">,</span><span class="n">mouseY</span><span class="o">);</span>
          <span class="n">game1</span><span class="o">.</span><span class="na">checkState</span><span class="o">();</span>    <span class="c1">/// this helps us determine what to do when there are multiple buttons in the Game</span>
<span class="o">}</span>
</pre></div>
</div>
<p>So, now we need to write the code for this checkState( ) method  within the Game Class. So, first thing we
do is see if the button states have been activated so that &#8216;on&#8217; == true.  If so, then we want to use this
as a trigger to change the game state.  However, it&#8217;s important to remember to set the button  <code class="docutils literal"><span class="pre">on</span></code> state
back to false. See the code below:</p>
<div class="highlight-Java"><div class="highlight"><pre>  <span class="c1">//this code is in the Game class tab</span>

      <span class="kt">void</span> <span class="nf">checkState</span><span class="o">(){</span>
              <span class="k">if</span><span class="o">(</span><span class="n">startBtn</span><span class="o">.</span><span class="na">on</span><span class="o">==</span><span class="kc">true</span><span class="o">){</span>
                      <span class="n">gameState</span><span class="o">=</span><span class="n">ACTIVE</span><span class="o">;</span>   <span class="c1">//change game to active state</span>
                      <span class="n">startBtn</span><span class="o">.</span><span class="na">on</span><span class="o">=</span><span class="kc">false</span><span class="o">;</span>
              <span class="o">}</span>
              <span class="k">if</span><span class="o">(</span><span class="n">resetBtn</span><span class="o">.</span><span class="na">on</span><span class="o">==</span><span class="kc">true</span><span class="o">){</span>
                      <span class="n">gameState</span><span class="o">=</span><span class="n">START</span><span class="o">;</span>   <span class="c1">//change game to start screen</span>
                      <span class="n">resetBtn</span><span class="o">.</span><span class="na">on</span><span class="o">=</span><span class="kc">false</span><span class="o">;</span>
              <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="game-instance">
<h2>11.6. Game Instance<a class="headerlink" href="#game-instance" title="Permalink to this headline">¶</a></h2>
<p>All of the above code assumes that we will define, initialize and utilize a Game object in
the main program tab. Since we need access in the draw loop, as usual, we&#8217;ll declare the object
above the setup function, initialize in the setup function, and then use in the draw loop:</p>
<div class="highlight-Java"><div class="highlight"><pre><span class="c1">//this code is in the main tab</span>

<span class="c1">//other global variables</span>
<span class="n">Game</span> <span class="n">game1</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="o">(){</span>
<span class="c1">//other initializations</span>

<span class="n">game1</span><span class="o">=</span> <span class="k">new</span> <span class="n">Game</span><span class="o">();</span>   <span class="c1">//call the Game constructor, here we call the default constructor</span>
<span class="o">}</span>  <span class="c1">//end setup</span>

<span class="kt">void</span> <span class="nf">draw</span><span class="o">(){</span>   <span class="c1">//here is how we might use this code</span>

        <span class="n">game1</span><span class="o">.</span><span class="na">display</span><span class="o">();</span>

        <span class="k">if</span><span class="o">(</span><span class="n">game1</span><span class="o">.</span><span class="na">gameState</span><span class="o">==</span><span class="n">game1</span><span class="o">.</span><span class="na">ACTIVE</span><span class="o">){</span> <span class="c1">// put most active game code in here</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">timer</span><span class="o">.</span><span class="na">isFinished</span><span class="o">())</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">totalDrops</span> <span class="o">&lt;</span> <span class="n">drops</span><span class="o">.</span><span class="na">length</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">drops</span><span class="o">[</span><span class="n">totalDrops</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Drop</span><span class="o">();</span>
                <span class="n">totalDrops</span><span class="o">++;</span>
                <span class="o">}</span>  <span class="c1">// end if</span>
                <span class="n">timer</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
                <span class="o">}</span>  <span class="c1">//end timer</span>
                <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">totalDrops</span><span class="o">;</span><span class="n">i</span><span class="o">++){</span>
                <span class="k">if</span><span class="o">(</span><span class="n">drops</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">isActive</span><span class="o">==</span><span class="kc">true</span><span class="o">){</span>  <span class="c1">//only look at active drops</span>
                   <span class="kt">boolean</span> <span class="n">isHit</span><span class="o">=</span><span class="kc">false</span><span class="o">;</span>
                   <span class="n">drops</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">move</span><span class="o">();</span>
                   <span class="n">isHit</span><span class="o">=</span> <span class="n">drops</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">isIntersecting</span><span class="o">(</span><span class="n">paddle1</span><span class="o">);</span>
                        <span class="k">if</span><span class="o">(</span><span class="n">isHit</span><span class="o">){</span>
                                <span class="n">println</span><span class="o">(</span><span class="s">&quot;isHit&quot;</span><span class="o">);</span>
                                <span class="n">drops</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">isActive</span><span class="o">=</span><span class="kc">false</span><span class="o">;</span>
                                <span class="n">drops</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">y</span><span class="o">=</span> <span class="n">height</span> <span class="o">+</span> <span class="n">drops</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">getBottomY</span><span class="o">();</span>  <span class="c1">//move off screen</span>
                                <span class="n">game1</span><span class="o">.</span><span class="na">score</span><span class="o">++;</span>
                   <span class="o">}</span>
                <span class="n">drops</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">display</span><span class="o">();</span>
                <span class="o">}</span>  <span class="c1">//end isActive</span>
        <span class="o">}</span><span class="c1">//end drop[] loop</span>
        <span class="n">paddle1</span><span class="o">.</span><span class="na">display</span><span class="o">();</span>
        <span class="o">}</span>  <span class="c1">//end game1.Active</span>

<span class="o">}</span>  <span class="c1">//end draw</span>
</pre></div>
</div>
</div>
<div class="section" id="inheritance">
<h2>11.7. Inheritance<a class="headerlink" href="#inheritance" title="Permalink to this headline">¶</a></h2>
<div class="section" id="child-classes-of-the-drop-class">
<h3>11.7.1. Child classes of the Drop Class<a class="headerlink" href="#child-classes-of-the-drop-class" title="Permalink to this headline">¶</a></h3>
<p>The next modification for our game is that we&#8217;re going to use several different drop types.
So, we&#8217;ll have 2 different classes that inherit from the Drop class.  Let&#8217;s say we&#8217;ll have SeaHorses
and Stars.  Since the behavior of these objects will be almost identical to <a class="reference external" href="http://learningprocessing.com">Shiffman&#8217;s</a> Drop class,
it makes sense for us to use object inheritance when defining these objects.</p>
</div>
<div class="section" id="method-override">
<h3>11.7.2. Method Override<a class="headerlink" href="#method-override" title="Permalink to this headline">¶</a></h3>
<p>It&#8217;s obvious that these objects will have unique display() methods which display their unique
shapes.  Other methods like move() might be identical to the Drop method: move( ).</p>
<p>When one class inherits from another class, any method that is not specified in the child
class, will be implemented using the method in the parent class.  This is called :ref: <cite>Method Override</cite>,
and it means that when a child class has code that implements the same method that&#8217;s also in
parent class, then it is the child method code which is executed, if a child object calls that method.
In essence, we end up with 2 different versions of one method, each with the same function signature,
but with different code within the function     body.  So we need to understand the rules the compiler uses
when determining which method to execute.  So, to summarize, when an object from a child class executes
a method call, the compiler first looks in the class definition for the child object to see if that
method is implemented in the child class, if so, then that&#8217;s the version that is executed.
This a major benefit of using inheritance, we only need to make changes to methods or features that are different
in the child class.</p>
<p>For now we can simply create a Seahorse class that inherits from the Drop class using the
code class code below:</p>
<div class="highlight-Java"><div class="highlight"><pre><span class="c1">//this code is in the Seahorse Class tab</span>

<span class="kd">class</span> <span class="nc">Seahorse</span> <span class="kd">extends</span> <span class="n">Drop</span><span class="o">{</span>
                <span class="n">PShape</span> <span class="n">s</span><span class="o">;</span>
                <span class="kt">float</span> <span class="n">sWidth</span><span class="o">;</span>
                <span class="kt">float</span> <span class="n">sHeight</span><span class="o">;</span>
                <span class="kt">float</span> <span class="n">bottomY</span><span class="o">;</span>
                <span class="kt">float</span> <span class="n">bottomX</span><span class="o">;</span>

                <span class="n">Seahorse</span><span class="o">(){</span>
                        <span class="kd">super</span><span class="o">();</span>   <span class="c1">//call the Drop constructor</span>
                <span class="o">}</span>

                <span class="kt">void</span> <span class="nf">display</span><span class="o">(){</span>
                    <span class="c1">//some code to display the seahorse which is different than a drop</span>
                <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="making-drops">
<h3>11.7.3. Making Drops<a class="headerlink" href="#making-drops" title="Permalink to this headline">¶</a></h3>
<p>In <a class="reference external" href="http://learningprocessing.com">Shiffman&#8217;s</a> game, there are several important distinctions we need to think about, which control
the structure and behavior of our game, in <a class="reference external" href="http://learningprocessing.com">Shiffman&#8217;s</a> game, this structure is created in the main
program tab.  The general idea is that he has an array:  drops[] that stores the Drop objects,
we&#8217;ll modify this so that it can also contain Drop sub-class objects like Stars or Seahorses.</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first"><code class="docutils literal"><span class="pre">Drop[]</span> <span class="pre">drops;</span></code>    //declares an array of Drop objects</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">drops</span> <span class="pre">=</span> <span class="pre">new</span> <span class="pre">Drop[50];</span></code>  //initializes the array to a size of 50 elements</p>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">if(timer.isFinished()){</span>&nbsp;&nbsp;&nbsp; <span class="pre">....</span>&nbsp;&nbsp;&nbsp; <span class="pre">}</span></code>   //inside this block of code is where new drops are</dt>
<dd><p class="first last">actually created each time the timer goes off.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>inside the block:  <code class="docutils literal"><span class="pre">if(timer.isFinished()){</span> <span class="pre">...</span> <span class="pre">}</span></code>  is where we need to figure out how</dt>
<dd><p class="first last">to create different types of drops</p>
</dd>
</dl>
</li>
</ol>
</div></blockquote>
<p>So, Let&#8217;s start by focusing inside the block of code where the <code class="docutils literal"><span class="pre">timer.isFinished()</span></code> has evaluated to true:</p>
<div class="highlight-Java"><div class="highlight"><pre>        <span class="k">if</span> <span class="o">(</span><span class="n">timer</span><span class="o">.</span><span class="na">isFinished</span><span class="o">())</span> <span class="o">{</span>
  <span class="c1">// Deal with raindrops</span>
  <span class="c1">// Initialize one drop</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">totalDrops</span> <span class="o">&lt;</span> <span class="n">drops</span><span class="o">.</span><span class="na">length</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">drops</span><span class="o">[</span><span class="n">totalDrops</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Drop</span><span class="o">();</span><span class="c1">//(game.levels[game.currentLevel].dropSpeed);</span>
                <span class="c1">// Increment totalDrops</span>
                <span class="n">totalDrops</span><span class="o">++;</span>
  <span class="o">}</span>
  <span class="n">timer</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</div>
<p>In the above code, only 1 drop is created each time the timer goes off!  This drop is created in the
array location:  <code class="docutils literal"><span class="pre">drops[totalDrops]</span></code>  The first time a drop is created, it&#8217;s in the first array positon:  <code class="docutils literal"><span class="pre">drops[0]</span></code>
After the drop is created, totalDrops is incremented to <code class="docutils literal"><span class="pre">1</span></code>:  <code class="docutils literal"><span class="pre">totalDrops++</span></code>  So, the next time the <code class="docutils literal"><span class="pre">timer.isFinished()</span></code> is true,
then the next drop will be created in the array location: drops[1].   For our game, we want to create different
types of drops so we&#8217;ll take advantage of the idea that inheritance allows us to use <a class="reference internal" href="glossary.html#polymorphism"><em>Polymorphism</em></a></p>
</div>
</div>
<div class="section" id="polymorphism">
<h2>11.8. Polymorphism<a class="headerlink" href="#polymorphism" title="Permalink to this headline">¶</a></h2>
<p>As discussed above, we used inheritance to extend the Drop class, we created a child class: Seahorse.
So, the beauty of this is that we can now put Seahorse objects in an array of that has been declared to contain Drop objects.
This is polymorphism, it means that a parent class &#8216;reference&#8217; can be used to refer to a sub-class object.  So, we can do the
following:</p>
<div class="highlight-Java"><div class="highlight"><pre><span class="n">Drop</span> <span class="n">someDrop</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Seahorse</span><span class="o">();</span>    <span class="c1">//someDrop is a Drop reference, it points to a Seahorse object.</span>
</pre></div>
</div>
<p>This might not seem like a very important feature on initial inspection, however, it is one of the powerful
features that result from the Object-Oriented concept of Class Inheritance.  So, now we can change the
game code so that when the timer goes off, we can create Seahorse objects instead of Drop objects:</p>
<div class="highlight-Java"><div class="highlight"><pre><span class="n">drops</span><span class="o">[</span><span class="n">totalDrops</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Seahorse</span><span class="o">();</span>
</pre></div>
</div>
<p>This is a start, but in addition, to make our game interesting, we want to have a variety of drop type objects
falling in the game, yet we only want to create 1 drop each time the timer goes off.  So we need some way
to control this.   We&#8217;re looking for random behavior, like flipping a coin.  Also, using a switch statement will
allow us to easily add more types of dropping objects without making big changes to the code.  The switch statement
can&#8217;t use a randomly generated float value, it needs an integer. So, first thing we need to generate a random integer
and we can do this by type casting the random number to an integer.  This will result in truncation of the integer value, so
if we used Random(0,1), we&#8217;d only ever get the integer <code class="docutils literal"><span class="pre">0</span></code> as a generated value.  So, the code below generates 2 different
values, 0 and 1, then we can use that to randomly generate different types of drops.:</p>
<div class="highlight-Java"><div class="highlight"><pre><span class="kt">int</span> <span class="n">choice</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">random</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">2</span><span class="o">);</span>  <span class="c1">//  gives 0,1 vaules</span>

<span class="k">switch</span><span class="o">(</span><span class="n">choice</span><span class="o">){</span>

<span class="k">case</span> <span class="mi">0</span><span class="o">:</span>  <span class="n">drops</span><span class="o">[</span><span class="n">totalDrops</span><span class="o">]=</span> <span class="k">new</span> <span class="n">Seahorse</span><span class="o">();</span>
                <span class="k">break</span><span class="o">;</span>

<span class="k">case</span> <span class="mi">1</span><span class="o">:</span>  <span class="n">drops</span><span class="o">[</span><span class="n">totalDrops</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Star</span><span class="o">();</span>
                <span class="k">break</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The code as Shiffman has written it, means that there will never be more than 50 drops created, in other words,
once totalDrops&gt;=50, no new drops will be created.  It would not be much more difficult to have additional logic
to have an else{ } block where, once we know the entire array has been filled with drops, to continue the game,
we could just loop through the array and find inActive drops and then create new drops in those spots.  Below I have
just pasted in the duplicated code from above, this would not be the most elegant or efficient way to do this but it
should at least convey the idea of how this might be implemented:</p>
<div class="highlight-Java"><div class="highlight"><pre>   <span class="k">if</span><span class="o">(</span><span class="n">game1</span><span class="o">.</span><span class="na">state</span><span class="o">==</span><span class="n">game1</span><span class="o">.</span><span class="na">ACTIVE</span><span class="o">){</span>
           <span class="k">if</span><span class="o">(</span><span class="n">totalDrops</span><span class="o">&lt;=</span><span class="n">drops</span><span class="o">.</span><span class="na">length</span><span class="o">){</span>
     <span class="kt">int</span> <span class="n">choice</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">random</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">2</span><span class="o">);</span>  <span class="c1">//  gives 0,1 vaules</span>
        <span class="n">println</span><span class="o">(</span><span class="s">&quot;choice &quot;</span> <span class="o">+</span> <span class="n">choice</span><span class="o">);</span>
        <span class="k">switch</span><span class="o">(</span><span class="n">choice</span><span class="o">){</span>
           <span class="k">case</span> <span class="mi">0</span><span class="o">:</span>  <span class="n">drops</span><span class="o">[</span><span class="n">totalDrops</span><span class="o">]=</span> <span class="k">new</span> <span class="n">Seahorse</span><span class="o">();</span>
                     <span class="k">break</span><span class="o">;</span>
           <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>  <span class="n">drops</span><span class="o">[</span><span class="n">totalDrops</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Drop</span><span class="o">();</span>
                     <span class="k">break</span><span class="o">;</span>
         <span class="o">}</span>    <span class="c1">//end switch</span>
<span class="n">totalDrops</span><span class="o">++;</span>
    <span class="o">}</span>  <span class="c1">//end if</span>
     <span class="k">else</span><span class="o">{</span>  <span class="c1">//the array is already full of drops, some are not active, find one isFinished and create a new drop.</span>
           <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span> <span class="n">drops</span><span class="o">.</span><span class="na">length</span><span class="o">,</span> <span class="n">i</span><span class="o">++){</span>
                    <span class="k">if</span><span class="o">(</span><span class="n">drops</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">isFinished</span><span class="o">){</span>   <span class="c1">//or !drops[i].isActive</span>
                                   <span class="kt">int</span> <span class="n">choice</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">random</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">2</span><span class="o">);</span>  <span class="c1">//  gives 0,1 vaules</span>
                                   <span class="k">switch</span><span class="o">(</span><span class="n">choice</span><span class="o">){</span>
                                   <span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
                                                   <span class="n">drops</span><span class="o">[</span><span class="n">i</span><span class="o">]=</span> <span class="k">new</span> <span class="n">Seahorse</span><span class="o">();</span>
                                                   <span class="n">i</span><span class="o">=</span><span class="n">drops</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="c1">//  since we&#39;ve found one, drop out of the loop by resetting i to the max value</span>
                                                   <span class="k">break</span><span class="o">;</span>
                                   <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
                                                   <span class="n">drops</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Star</span><span class="o">();</span>
                                                   <span class="n">i</span><span class="o">=</span><span class="n">drops</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
                                                   <span class="k">break</span><span class="o">;</span>
                                                   <span class="o">}</span>   <span class="c1">//end switch</span>
                    <span class="o">}</span>  <span class="c1">//end if</span>
           <span class="o">}</span>  <span class="c1">//end for</span>
     <span class="o">}</span>  <span class="c1">//end else</span>

           <span class="c1">///the rest of the game1.ACTIVE code</span>

           <span class="o">}</span>
</pre></div>
</div>
<p>Questions:</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">11. Paddle Drop Game</a><ul>
<li><a class="reference internal" href="#planning">11.1. Planning</a><ul>
<li><a class="reference internal" href="#game-instance-variables">11.1.1. Game: Instance Variables</a></li>
<li><a class="reference internal" href="#game-methods">11.1.2. Game: Methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#game-button-objects">11.2. Game Button Objects</a></li>
<li><a class="reference internal" href="#game-display-buttons">11.3. Game Display - Buttons</a></li>
<li><a class="reference internal" href="#button-state">11.4. Button State</a></li>
<li><a class="reference internal" href="#game-button-integration">11.5. Game Button Integration</a></li>
<li><a class="reference internal" href="#game-instance">11.6. Game Instance</a></li>
<li><a class="reference internal" href="#inheritance">11.7. Inheritance</a><ul>
<li><a class="reference internal" href="#child-classes-of-the-drop-class">11.7.1. Child classes of the Drop Class</a></li>
<li><a class="reference internal" href="#method-override">11.7.2. Method Override</a></li>
<li><a class="reference internal" href="#making-drops">11.7.3. Making Drops</a></li>
</ul>
</li>
<li><a class="reference internal" href="#polymorphism">11.8. Polymorphism</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="rainGame.html"
                        title="previous chapter">10. Rain Catcher Game</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="paddle.html"
                        title="next chapter">12. Paddle Object</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="paddle.html" title="12. Paddle Object"
             >next</a> |</li>
        <li class="right" >
          <a href="rainGame.html" title="10. Rain Catcher Game"
             >previous</a> |</li>
        <li><a href="index.html">CS1335 Documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, Karen Doore.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3b2.
    </div>
  </body>
</html>